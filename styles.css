/* --- PILLAR CARD (ACORDEÓN) --- */
.pillar-card { 
    background: var(--card); 
    border-radius: 12px; 
    border: 1px solid var(--border); 
    transition: all 0.2s ease;
    overflow: hidden; /* Vital para que el acordeón funcione */
}

.pillar-card:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 10px 20px rgba(0,0,0,0.05); 
    border-color: var(--primary);
}

/* Header Clickable */
.pillar-header { 
    padding: 20px; 
    display: flex; 
    gap: 16px; 
    align-items: flex-start; 
    cursor: pointer; 
    background: white;
    position: relative;
    z-index: 2;
}

/* Icono de Flecha */
.accordion-icon {
    margin-left: auto; /* Empuja a la derecha */
    color: var(--text-light);
    transition: transform 0.3s ease;
    align-self: center;
}

/* Estado Activo (Abierto) */
.pillar-card.active .accordion-icon {
    transform: rotate(180deg);
    color: var(--primary);
}

.pillar-card.active {
    border-color: var(--primary);
    background: #fcfcfc;
}

/* Lista de Tareas (Oculta por defecto) */
.tasks-list { 
    max-height: 0; /* Cerrado */
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
    background: #f8fafc;
    border-top: 1px solid transparent;
}

/* Lista de Tareas (Abierta) */
.pillar-card.active .tasks-list {
    max-height: 500px; /* Altura máxima suficiente para el contenido */
    opacity: 1;
    padding: 15px 20px; /* Añadimos padding solo al abrir */
    border-top-color: var(--border);
}

/* Estilos internos de las tareas */
.task-row { display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #eee; }
.task-row:last-child { border-bottom: none; margin-bottom: 0; }
.t-name { font-weight: 500; color: var(--text); }
.t-val.red { color: var(--danger); font-weight: 700; background: #fee2e2; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }
.t-val.green { color: var(--success); font-weight: 700; background: #dcfce7; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; }

/* Iconos y Gráficos del Header */
.icon-box { background: var(--primary-light); color: var(--primary); width: 48px; height: 48px; border-radius: 12px; display: grid; place-items: center; flex-shrink: 0; }
.chart-mini { width: 50px; height: 50px; position: relative; flex-shrink: 0; margin-left: 10px; }
.chart-val { position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); font-size: 0.75rem; font-weight: 800; }
